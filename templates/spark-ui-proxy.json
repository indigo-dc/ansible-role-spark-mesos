{
    "id": "/spark-proxy",
    "cmd": null,
    "cpus": 0.05,
    "mem": 32,
    "disk": 0,
    "instances": 1,
    "acceptedResourceRoles": [
      "*"
    ],
    "container": {
      "type": "DOCKER",
      "docker": {
        "forcePullImage": true,
        "image": "indigodatacloudapps/nginxproxy",
        "parameters": [],
        "privileged": true
      },
      "volumes": [],
      "portMappings": [
        {
          "containerPort": 4040,
          "hostPort": 0,
          "labels": {},
          "name": "sparkui",
          "protocol": "tcp",
          "servicePort": 34040
        }
      ]
    },
    "env": {
      "ZOOKEEPER_HOST_LIST":"{{zookeeper_peers_nodes}}",
      "PROXY_NAME": "SPARK_PROXY",
      "PROXY_FROM": "4040",
      "PROXY_TO": "4040"
    },
    "healthChecks": [
      {
        "command": {
          "value": "dodas_check_proxy_target_host"
        },
        "gracePeriodSeconds": 300,
        "intervalSeconds": 60,
        "maxConsecutiveFailures": 3,
        "protocol": "COMMAND",
        "ipProtocol": "IPv4",
        "timeoutSeconds": 20,
        "delaySeconds": 15
      }
    ],
    "labels": {
      "HAPROXY_GROUP": "external"
    },
    "networks": [
      {
        "mode": "container/bridge"
      }
    ],
    "portDefinitions": []
  }